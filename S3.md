# Step 3: Adding confirmation step
We want a confirmation step for our contact form.
That involves adding some new views and templates.

## Updating the form template
I said before that we were done making the form, but actually, we missed a step.
Notice something missing? Yes, no `<form>` tags! Let's fix that:

```html
    <form action="/confirm/" method="post">
        {% csrf_token %}
        {{ form.as_div }}
        <button>
            <input type="submit" value="Confirm">
        </button>
    </form>
```
`method="post"` means that the browser will send a POST HTTP request.
That means that there is some data being sent.

`action="/confirm"` means that Django will route the request to the view that has been assigned that address.
We'll update the `urls.py` in a minute.

CSRF tokens are used by Django to secure form data and prevent hacking methods.
Cross Site Script hacks in particular.

Okay, now we can actually submit this form. But we need a place to submit to.

## Add `confirmation_view`
First, let's add a view for the confirmation. 
It'll look basically the same as the `contact_page_view`.
See comments for explanation.

```python
# core/views.py

# Add to the top
from django.views.decorators.http import require_POST

# This decorator prevents users from accessing this view via a GET request.
# In other words, they need to click the submit button in the contact form
# in order to access this view.
@require_POST
def confirmation_page_view(request):
    template = loader.get_template('confirmation_page.html')
    # When we submit the contact form, it will send a POST HTTP request.
    # The data submitted in the form is included in the request.
    # We populate a new ContactForm() object with the submitted data.
    form = ContactForm(request.POST)
    context = {
        'form': form
    }
    return HttpResponse(template.render(context, request))
```

## Add `confirmation_page.html` template
After making the view, we need to make the `confirmation_page.html` template.

```html
{% extends 'base.html' %}

{% block content %}
    {% for field in form %}
        {{ field.label }}:
        {{ field.value }}
    {% endfor %}
{% endblock %}
```

Remember, `form` is an instance of `ContactForm` that includes our submitted data.
This template loops through the fields in the form,
then displays the field label _string_ (not the `<label>` tag)
and field's value (also string).

## Add entry in `urls.py`
Update the `urls.py` file:

```python
# core/urls.py

urlpatterns = [
    path('', views.contact_page_view, name='contact_page'),
    # Add the line below.
    path('confirm', views.confirmation_page_view, name='confirmation_page')
]
```

Look at the form template again:

```html
<form action="/confirm" method="post">
```

When the form is submitted, Django will look at urlpatterns to find the right 'action' to take.
'confirm' refers to the `confirmation_page_view`, so it will run that 'action'.

## Test the confirmation
Save everything and reload the form page (if you don't, you might be using the old template).

Add some data. See what happens if you don't put in an email address? 
Django knows that an email wasn't input and won't let you submit the form.

Now try putting in a valid email address and submit. I got this:

> Name: test Email: test@test.com Message: test

Okay, looks fine. We'll worry about styling it later.

## Update template
Next, we need to be able to actually submit the form.
Let's update the template with a `<form>` and `<button>`.

```html
<!-- confirmation_page.html -->
{% extends 'base.html' %}

{% block content %}
    {% for field in form %}
        {{ field.label }}:
        {{ field.value }}
    {% endfor %}
<!-- Added form and button-->
    <form action="/submit" method="post">
        <button>
            <input type="submit" value="Submit">
        </button>
    </form>
{% endblock %}
```

I think you can figure out what this does.
Let's add the path for `submit` in `urls.py`

```python
# core/urls.py
urlpatterns = [
    path('', views.contact_page_view, name='contact_page'),
    path('confirm', views.confirmation_page_view, name='confirmation_page'),
    path('submit', views.submit_view, name='submit_contact_form')
]
```

Let's make `submit_view`

## Add `submit_view`
This is the meat and potatoes of this process. 
After the user submits the form, it should send an email.

```python
from django.core.mail import send_mail


```